{% extends 'base.html' %}

{% comment %} {% extends 'base.html' %}
{% load static %}
{% block title %}Quiz Questions{% endblock title %}

{% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <h1 class="mb-4 text-center">{{module.name}}</h1>
      <div class="feed">

      </div>
      

      <!-- {% for question in questions %}
        <div class="card mb-4">
          <div class="card-header">
            <h2 class="h5 mb-0">{{ question.text }}</h2>
          </div>
          <div class="card-body">
            <form method="post">
                {% csrf_token %}
                {% for question in questions %}
                  <div class="card mb-4">
                    <div class="card-header">
                      <h3 class="h5 mb-0">{{ question.text }}</h3>
                    </div>
                    <div class="card-body">
                      <div class="form-group">
                        {% for choice_id, choice_text in question.get_form.choices.choices %}
                          <div class="form-check">
                            <input type="checkbox" class="form-check-input" name="choices_{{ question.id }}" id="choice_{{ question.id }}_{{ choice_id }}" value="{{ choice_id }}">
                            <label class="form-check-label" for="choice_{{ question.id }}_{{ choice_id }}">{{ choice_text }}</label>
                          </div>
                        {% endfor %}
                      </div>
                    </div>
                  </div>
                {% endfor %} -->


      <!-- <form method="post" action="{% url 'submit-answer' question.id %}" class="question-form" data-question-id="{{ question.id }}">
              {% csrf_token %}
              {% with form=question.get_form %}
                <div class="row">
                  {% for field in form %}
                    <div class="col-12 form-group {{ field.choice.id }}">
                      {{ field.errors }}
                      <input type="hidden" name="choice_id[]" value="{{ field.choice.id }}">
                      <div class="choice-container">
                        {{ field.label_tag }}
                        {{ field }}
                      </div>
                    </div>
                  {% endfor %}
                </div>
              {% endwith %}
              <button type="submit" class="btn btn-primary mt-3">Submit Answer</button>
            </form> -->
    </div>
  </div>
  {% endfor %}
</div>
</div>
</div>




<!-- <script>
  $(document).ready(function() {
    $('.question-form').on('submit', function(e) {
      e.preventDefault();

      var $form = $(this);
      var url = $form.attr('action');
      var questionId = $form.data('question-id');
      var data = $form.serialize();

      $.ajax({
        type: 'POST',
        url: url,
        data: data,
        success: function(response) {
          var correct = response.correct;
          var chosen = response.chosen;
          var correctAnswers = response.correct_answers;

          $form.find('.choice-container').each(function() {
            var $choice = $(this).find('input[type="checkbox"], input[type="radio"]');
            var choiceVal = parseInt($choice.val());

            $(this).removeClass('text-success text-danger'); // Clear previous colors

            if (chosen.includes(choiceVal)) {
              $(this).addClass(correctAnswers.includes(choiceVal) ? 'text-success' : 'text-danger');
            } else if (correctAnswers.includes(choiceVal)) {
              $(this).addClass('text-success');
            }
          });

          // Potential disabling of submit button (optional)
          // $form.find('button[type="submit"]').prop('disabled', true);
        },
        error: function(response) {
          alert('Error submitting answer.');
        }
      });
    });
  });
</script> -->

{% endblock content %}

{% block script %}
<script src="{% static 'questions/js/main.js' %}"></script>
{% endblock script %} {% endcomment %}


{% load static %}
{% block title %}Quiz Questions{% endblock title %}

{% block content %}
<div class="container mx-auto mt-10">
  <div class="flex justify-center">
    <div class="w-full lg:w-2/3">
      <h1 class="mb-6 text-center text-3xl font-bold">{{ module.name }}</h1>
      <div class="feed">

      </div>
    </div>
  </div>
</div>
{% endblock content %}

{% block script %} <script src='{% static "questions/js/main.js" %}'> </script> {% endblock script %}
